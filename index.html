<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <!-- Copyright Â© 2020 by m@mcloc.cn -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’ğŸ’ğŸ‘«ğŸ’ğŸ’</title>
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css">
    <style>
        html,
        body {
            height: 100%;
        }

        .wrap {
            position: relative;
            height: 100%;
            width: 100%;
            background-image: url("https://bing.xpigm.com/");
            background-size: cover;
            background-position: center;
        }

        .wrap-son {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            background: rgba(59, 59, 59, 0.3);
        }

        .jumbotron {
            background: rgba(255, 255, 255, 0);
            color: #f5f5f5;
        }

        .love {
            color: #ffffff;
            margin: 0 20px;
            line-height: 1.3;
            font-weight: 300;
        }

        .hans-container {
            position: fixed;
            bottom: 0px;
            width: 100%;
            height: 120px;
            z-index: 1;
        }

        .timer b {
            font-size: 50px;
        }

        #s {
            font-size: 80px;
        }

        #updatalove,
        #to_comments {
            margin: 0 10px;
        }

        .copy {
            position: absolute;
            bottom: 0;
            color: #ffffff;
            font-size: 12px;
        }

        /* è¯„è®º */
        .comment {
            margin-top: 30px;
            margin-bottom: 100px;
        }


        .garden-container {
            position: absolute;
            display: flex;
            /*è®¾ä¸º Flex å¸ƒå±€ä»¥åï¼Œå­å…ƒç´ çš„floatã€clearå’Œvertical-alignå±æ€§å°†å¤±æ•ˆ*/
            display: -webkit-flex;
            /* Safari */
            flex-direction: column;
            /*å®¹å™¨å†…é¡¹ç›®çš„æ’åˆ—æ–¹å‘(é»˜è®¤æ¨ªå‘æ’åˆ— row)*/
            flex-wrap: nowrap;
            /*å®¹å™¨å†…é¡¹ç›®æ¢è¡Œæ–¹å¼*/
            justify-content: center;
            /*é¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼*/
            align-items: center;
            /*é¡¹ç›®åœ¨äº¤å‰è½´ä¸Šå¦‚ä½•å¯¹é½*/
            align-content: center;
            /*å®šä¹‰äº†å¤šæ ¹è½´çº¿çš„å¯¹é½æ–¹å¼ã€‚å¦‚æœé¡¹ç›®åªæœ‰ä¸€æ ¹è½´çº¿ï¼Œè¯¥å±æ€§ä¸èµ·ä½œç”¨*/
            width: 100%;
            height: 100%;
            left: 0px;
            pointer-events: none;
        }

        #garden {}
    </style>
</head>

<body>
    <div class="wrap" id="nm-container">
        <div class="wrap-son">

            <div class="container-fluid">
                <div class="garden-container">
                    <canvas id="garden"></canvas>
                </div>
                <div class="box" style="margin-top: 8%;">
                    <div class="jumbotron text-center">
                        <h1>æˆ‘ä»¬ç›¸æ‹äº†</h1>
                        <h3 class="timer">
                            <div class="row">
                                <b id="d"></b> å¤© <b id="h"></b> æ—¶ <b id="m"></b> åˆ†
                            </div>
                            <div class="row">
                                <b id="s"></b> ç§’
                            </div>
                        </h3>
                        <p>
                            <a id="to_comments" class="btn btn-primary btn-lg" role="button">ç•™ä¸ªè¨€å§</a>
                        </p>
                    </div>
                </div>

                <div class="row">
                    <h4 class="love text-center"><span class="love-son"></span></h4>
                </div>
                <div id="hans-bolang"></div>
            </div>
        </div>
    </div>

    <div class="container-fluid" id="comments">
        <div class="row comment">
            <div class="col-xs-10 col-sm-10 col-md-6 col-xs-push-1 col-sm-push-1 col-md-push-3">
                <h2>ç•™è¨€ï¼š</h2>
                <div id="vcomments"></div>
            </div>
        </div>
    </div>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <!-- <script src='https://cdn.bootcdn.net/ajax/libs/valine/1.4.16/Valine.min.js'></script>Valine è¯„è®ºç³»ç»Ÿ -->
    <script src='https://unpkg.com/valine/dist/Valine.min.js'></script>

    <!-- è®¡æ—¶å™¨ -->
    <script>
        function timer() {
            //new Date("2020-07-04 22:54:00");
            var start = new Date(1593874440000);
            var t = new Date() - start;
            var h = ~~(t / 1000 / 60 / 60 % 24);
            if (h < 10) {
                h = "0" + h;
            }
            var m = ~~(t / 1000 / 60 % 60);
            if (m < 10) {
                m = "0" + m;
            }

            var s = ~~(t / 1000 % 60);
            if (s < 10) {
                s = "0" + s;
            }
            document.getElementById('d').innerHTML = ~~(t / 1000 / 60 / 60 / 24);
            document.getElementById('h').innerHTML = h;
            document.getElementById('m').innerHTML = m;
            document.getElementById('s').innerHTML = s;
        }
        timer();
        setInterval(timer, 1000);
    </script>

    <script>
        var oComments = document.querySelector("#comments");
        var oCommentsTop = Math.round(oComments.offsetTop);
        //è¿åŠ¨æ¡†æ¶
        function move() {
            // 1. å…³é—­å¼€å¯å®šæ—¶å™¨;
            clearInterval(timer);
            var timer = setInterval(function () {
                // 2. è®¡ç®—é€Ÿåº¦;
                var iNow = document.documentElement.scrollTop || document.body.scrollTop; //100
                iNow = Math.round(iNow);
                var speed = (oCommentsTop - iNow) / 10;
                // 3. é€Ÿåº¦å–æ•´;
                if (speed > 0) {
                    speed = Math.ceil(speed);
                } else {
                    speed = Math.floor(speed);
                }
                document.documentElement.scrollTop = document.body.scrollTop = iNow + speed + 1;
                // 4. ç»ˆæ­¢æ¡ä»¶;
                if (iNow >= oCommentsTop) {
                    clearInterval(timer);
                }
            }, 20)
        }

        to_comments.onclick = move;
    </script>

    <!-- æƒ…è¯æ¥å£ -->
    <script>
        //è¿›å…¥é¡µé¢æ—¶è¯·æ±‚
        $.ajax({
            url: 'https://api.mcloc.cn/love',
            type: "GET",
            async: true,
            data: "type=json",
            dataType: "json",
            success: function (loveJson) {
                let love = loveJson["data"];
                $(".love-son").append(love);
            },
            error: function (textStatus) {
                console.log(JSON.stringify(textStatus));
            }
        });

        //ç‚¹å‡»æ—¶è¯·æ±‚
        $(".love").click(function () {
            $.ajax({
                url: 'https://api.mcloc.cn/love',
                type: "GET",
                async: true,
                data: "type=json",
                dataType: "json",
                success: function (loveJson) {
                    let love = loveJson["data"];
                    love = `<span class="love-son"">${love}</span>`;
                    $(".love").children().replaceWith(love);
                },
                error: function (textStatus) {
                    console.log(JSON.stringify(textStatus));
                }
            });
        });

        $("#updatalove").click(function () {
            $.ajax({
                // url: 'php/love.php',
                url: 'https://api.mcloc.cn/love/',
                type: "GET",
                async: true,
                data: "type=json",
                dataType: "json",
                success: function (loveJson) {
                    let love = loveJson["data"];
                    love = `<span class="love-son"">${love}</span>`;
                    $(".love").children().replaceWith(love);
                },
                error: function (textStatus) {
                    console.log(JSON.stringify(textStatus));
                }
            });
        });
    </script>

    <!-- Valine è¯„è®ºç³»ç»Ÿï¼› ç”± LeanCloud ç®¡ç†æ•°æ® -->
    <script>
        new Valine({
            el: '#vcomments',
            visitor: true ,
            appId: 'kOAT9PqbjXcDGkFLu9PnhAK9-gzGzoHsz',
            appKey: 'xLQkDNsVxqrH2YaWiVcxkXw3'
        })
    </script>


    <!-- åº•éƒ¨æ³¢æµª -->
    <script src="php/wave.php"></script>

    <canvas class="fireworks"
        style="position: fixed; left: 0px; top: 0px; z-index: 99999999; pointer-events: none; width: 1158px; height: 916px;"
        width="2316" height="1832">
    </canvas>
    <script type="text/javascript" src="/js/anime.min.js"></script>
    <script type="text/javascript" src="/js/fireworks.js"></script>
    <script>
        var startDate = new Date("2020-07-04 00:00:00")
        var start00Date = new Date(1593792000000);
        var startAccurateDate = new Date(1593874440000);
        var today = new Date();
        var year = today.getFullYear();
        var month = today.getMonth() + 1;
        var day = today.getDate();
        var hour = today.getHours();
        var diffDay = Math.floor((today.getTime() - start00Date.getTime()) / (1000 * 24 * 3600));
        if (month == 5 && day == 20) {
            document.title = "520å¿«ä¹â™¥";
            setTimeout(function () {
                startHeartAnimation();
            }, 2000);
            $(".wrap").css("background-image", "url('./img/p2562342088.webp')");
        }
        if (month == 5 && day == 21) {
            document.title = "521å¿«ä¹â™¥";
            setTimeout(function () {
                startHeartAnimation();
            }, 2000);
            $(".wrap").css("background-image", "url('./img/pic-todaybing-hd-txempYYe.jpg')");
        }
        //500å¤©
        if (diffDay == 500) {
            location.href = "/500day.html";
        }
    </script>

    <script type="text/javascript" src="js/garden_dev.js"></script>
    <script type="text/javascript" src="js/functions_dev.js"></script>
</body>

</html>
